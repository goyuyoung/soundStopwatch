<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stopwatch</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.js" integrity="sha512-dMiBqqEV5i3KqpAdsgQSSZ72DnNib7otY0X+b/Tnn1EmLym1dxuZ19csdZqBnfDniKd9bmNtzStQzuMrIa5Ngw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
</head>
<body>

    <div class="fullArea" id="fullArea">
        <div class="container" id="container">

            <div class="top" id="top">
        
                <p class="time" id="time">
                    <span id="minutes">00</span>:<span id="seconds">00</span>:<span id="tens">00</span>
                </p>
                <div class="time-button">
                    <button id="start" class="start"><i class="fa-solid fa-play"></i></button>
                    <button id="stop" class="stop"><i class="fa-solid fa-pause"></i></button>
                    <button id="reset" class="reset"><i class="fa-solid fa-rotate-right"></i></button>
                </div>
                
            </div>
    
            <div class="addCheck" id="addCheck">
                <a href="#" id="test" class="fullSizeBtn">음악 테스트</a>
                <a href="#" id="fullSizeBtn" class="fullSizeBtn">전체화면</a>
                <div class="add" id="add">
                    <p class="add_title"><i class="fa-solid fa-quote-left"></i>ㅤ배경화면 이미지를 선택해주세요.ㅤ<i class="fa-solid fa-quote-right"></i></p>
                    <div class="add_list">
                        <ul class="menu-wrap" id="image-menu-wrap">
                            <li value="0" class="selected">검정색</li>
                            <li value="1">흰색</li>
                            <li value="2">바다</li>
                            <li value="3">모닥불</li>
                            <li value="4">소나기</li>
                        </ul>
                    </div>
                </div>
                <div class="add" id="add_sound">
                    <p class="add_title"><i class="fa-solid fa-quote-left"></i>ㅤ배경음악을 선택해주세요.ㅤ<i class="fa-solid fa-quote-right"></i></p>
                    <div class="add_list">
                        <ul class="menu-wrap" id="sound-menu-wrap">
                            <li value="0" class="selected">파도 ASMR</li>
                            <li value="1">모닥불 ASMR</li>
                            <li value="2">빗소리 ASMR</li>
                        </ul>
                    </div>
                </div>
                <div class="info" id="info">
                    <p class="line"></p>
                    <p class="info_title"><i class="fa-solid fa-circle-info"> 사용방법</i></p>
                    
                    
                    <div class="info_text" id="info_text">
                        <p><i class="fa-solid fa-check"></i> 기본 배경화면은 검정색 화면입니다.</p>
                        <p><i class="fa-solid fa-check"></i> 전체화면 적용시에만 배경화면 변경이 가능합니다.</p>
                        <p><i class="fa-solid fa-check"></i> 배경화면 선택에 따라 <strong>배경음악</strong>이 자동으로 선택됩니다.</p>
                        <p><i class="fa-solid fa-check"></i> 검정색, 흰색(배경화면 이미지) 선택시에는 원하시는 배경음악을 선택하세요.</p>
                        <p><i class="fa-solid fa-check"></i> <strong>[전체화면] 버튼</strong>을 누르면 전체 화면으로 전환됩니다.</p>
                        <p><i class="fa-solid fa-check"></i> 전체화면은 <strong>Esc버튼 클릭</strong>시 해제됩니다.</p>        
                        <p><i class="fa-solid fa-check"></i> 배경음악은 <strong>전체화면 실행</strong>시 재생됩니다.</p>
                    </div>
                    
                </div>
            </div>
        </div>
        
    </div>
    <div class="footer" id="footer">
        © yooou 2023. All Rights Reserved
    </div>
</body>

<script>
    window.onload = function () {
        let minutes = 0;
        let seconds = 0;
        let tens = 0;
        let appendMinutes = document.querySelector('#minutes');
        let appendSecond = document.querySelector('#seconds');
        let appendTens = document.querySelector('#tens');
        let startBtn = document.querySelector('#start');
        let stopBtn = document.querySelector('#stop');
        let resetBtn = document.querySelector('#reset');
        let Interval;
        let fullSizeBtn = document.querySelector('#fullSizeBtn');
        let fullCheck = true;
        let imageMenuWrap = document.querySelector('#image-menu-wrap');
        let soundMenuWrap = document.querySelector('#sound-menu-wrap');
        let imageAddList = ["black", "white", "ocean", "fire", "rain"];
        let selectedImage = "black";
        let soundAddList = ['ocean', 'fire', 'rain'];
        let selectedSound = "ocean";
        let sound_obj;

        const startTimer = () => {
            tens++;
            if (tens <= 9) {
                appendTens.innerHTML = '0' + tens;
            }
            if (tens > 9) {
                appendTens.innerHTML = tens;
            }

            if (tens > 99) {
                seconds ++;

                if (seconds > 9) {
                    appendSecond.innerHTML = seconds;    
                } else {
                    appendSecond.innerHTML = '0' + seconds;
                }

                tens = 0;
                appendTens.innerHTML = '0' + 0;
            }

            if (seconds > 59) {
                minutes++;
                appendMinutes.innerHTML = minutes;
                seconds = 0;
                appendSecond.innerHTML = '0' + 0;
            }

        };

        startBtn.onclick = () => {
            clearInterval(Interval);
            Interval = setInterval(startTimer, 10);
        };

        stopBtn.onclick = () => {
            clearInterval(Interval);
        };

        resetBtn.onclick = () => {
            clearInterval(Interval);
            tens = '00';
            seconds = '00';
            minutes = '00';
            appendTens.innerHTML = tens;
            appendSecond.innerHTML = seconds;
            appendMinutes.innerHTML = tens;
        };

        function setFullScreen() {
            let fullArea = document.querySelector('#fullArea');
            if (fullArea.requestFullscreen) {
                fullArea.requestFullscreen();    
            }else if (fullArea.mozRequestFullScreen) {
                fullArea.mozRequestFullScreen();
            }else if (fullArea.webkitRequestFullscreen) {
                fullArea.webkitRequestFullscreen();
            }else if (fullArea.msRequestFullscreen) {
                fullArea.msRequestFullscreen();
            }
            //backgroud setting
            let bg_check = imageAddList[document.querySelector('li.selected').value];
            if (bg_check == 'black') {
                fullArea.style.backgroundColor = "#000000";
            } else if (bg_check == 'white') {
                fullArea.style.backgroundColor = "#ffffff";
                document.querySelector('#time').style.color = "#000000";
            } else {
                fullArea.style.backgroundImage = "url(img/" + bg_check + ".jpg)";
            }
            console.log(selectedSound);
            var sound = new Howl({
                src: ['sound/' + selectedSound+ '.mp3'],
                loop: true,
                onplay: function(){
                    console.log("start!");
                },
                onend : function() {
                    console.log("end!");
                }
            });
            sound_obj = sound;
            sound.play();
        }

        function setOriginalScreen() {
            if (document.exitFullscreen) {
                document.exitFullscreen();    
            }else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            }else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            }else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
        }

        function setOriginalCSS() {
            document.querySelector("#addCheck").style.display = 'block';
            document.querySelector('#fullArea').style.backgroundImage = ""
            document.querySelector('#fullArea').style.backgroundColor = "#000000";
            document.querySelector('#time').style.color = "#f8f8f8";
            document.querySelector('#time').style.fontSize = '150px';
            document.querySelector('#time').style.marginTop = '100px';
            
            var sound = new Howl({
                src: ['sound/' + selectedSound+ '.mp3'],
                loop: true,
                onplay: function(){
                    console.log("start!");
                },
                onend : function() {
                    console.log("end!");
                }
            });
            sound_obj.stop();
        }

        document.addEventListener("fullscreenchange", (e) => {
            if (document.fullscreenElement) { //full
                fullCheck = false;
            }
            else { //original
                fullCheck = true;
                setOriginalCSS();
            }
        });
        
        fullSizeBtn.onclick = () => {
            if(fullCheck) { //full
                fullCheck = false;
                document.querySelector("#addCheck").style.display = 'none';
                document.querySelector('#time').style.fontSize = '175px';
                document.querySelector('#time').style.marginTop = '0'
                setFullScreen();
                
            }else { //original
                fullCheck = true;
                setOriginalCSS();
                setOriginalScreen();

            }
            
        };
 
        function select(ulEl, liEl){
            Array.from(ulEl.children).forEach(
                v => v.classList.remove('selected')
            )
            if(liEl) liEl.classList.add('selected');
        }
 
        imageMenuWrap.addEventListener('click', e => {
            let selected = e.target;
            if (selected.tagName == "UL") return;
            select(imageMenuWrap, selected);
            selectedImage = imageAddList[selected.value];
            
            if(selected.value > 1) {
                selectedSound = selectedImage;
                select(soundMenuWrap, soundMenuWrap.children[e.target.value - 2] );
            }

        })

        soundMenuWrap.addEventListener('click', e => {
            let selected = e.target;
            if (selected.tagName == "UL") return;
            select(soundMenuWrap, selected);
            selectedSound = soundAddList[selected.value];
        })
       
    }
        
</script>


</html>

<!-- soundstopwatch.co.kr -->